%div{:class => 'query-options'}
  =form_tag(new_query_path, method: :get) do
    =label_tag(:jobs_retained, "Jobs Retained")
    =text_field_tag(:jobs_retained, params[:jobs_retained])
    =label_tag(:business_name, "Business Name")
    =text_field_tag(:business_name, params[:business_name])
    =label_tag(:amount_approved, "Amount of Award")
    =text_field_tag(:amount_approved, params[:amount_approved])
    %br
    =label_tag(:ein, "EIN")
    =text_field_tag(:ein, params[:ein])
    =label_tag(:bin, "BIN")
    =text_field_tag(:bin, params[:bin])
    =label_tag(:naics, "NAICS")
    =text_field_tag(:naics, params[:naics])
    %br
    =label_tag(:zip, "ZIP")
    =text_field_tag(:zip, params[:zip])
    =label_tag(:county, "County")
    =text_field_tag(:county, params[:county])
    =label_tag(:city, "City")
    =text_field_tag(:city, params[:city])
    %br
    =label_tag(:business_size, "Business Size")
    =text_field_tag(:business_size, params[:business_size])
    %br
    =submit_tag ("Submit Query")
  
  %div{:class => 'query-input'}
    %label{:for => 'percent-ownership'} Percent Ownership:
    %input{:type => 'text', :id => 'percent-ownership'}
  %br
  
%div{:class => 'demographic-options'}
  %h4{:class => 'demo-header'} Business Type
  %br
  %input{:type => 'checkbox', :id => 'bt-sole', :class => 'demo-option'}
  %label{:for => 'bt-sole'} Sole
  %br
  %input{:type => 'checkbox', :id => 'bt-prop', :class => 'demo-option'}
  %label{:for => 'bt-prop'} PropPartnership
  %br
  %input{:type => 'checkbox', :id => 'bt-corp', :class => 'demo-option'}
  %label{:for => 'bt-corp'} Corporation
  %br
  %input{:type => 'checkbox', :id => 'bt-llc', :class => 'demo-option'}
  %label{:for => 'bt-llc'} LLC
  %br
  %input{:type => 'checkbox', :id => 'bt-501', :class => 'demo-option'}
  %label{:for => 'bt-501'} 501(c)(3)
  %br

%div{:class => 'demographic-options'}
  %h4{:class => 'demo-header'} Race
  %br
  %input{:type => 'checkbox', :id => 'race-american-indian', :class => 'demo-option'}
  %label{:for => 'race-american-indian'} American Indian or Alaska Native 
  %br
  %input{:type => 'checkbox', :id => 'race-asian', :class => 'demo-option'}
  %label{:for => 'race-asian'} Asian 
  %br
  %input{:type => 'checkbox', :id => 'race-native-hawaiian', :class => 'demo-option'}
  %label{:for => 'race-native-hawaiian'} Native Hawaiian or Pacific Islander
  %br
  %input{:type => 'checkbox', :id => 'race-white', :class => 'demo-option'}
  %label{:for => 'race-white'} White
  %br
  %input{:type => 'checkbox', :id => 'race-other', :class => 'demo-option'}
  %label{:for => 'race-other'} Other
  %br
  %input{:type => 'checkbox', :id => 'race-no-answer', :class => 'demo-option'}
  %label{:for => 'race-no-answer'} Prefer not to answer
  
%div{:class => 'demographic-options'}
  %h4{:class => 'demo-header'} Ethnicity
  %br
  %input{:type => 'checkbox', :id => 'eth-non-hispanic-latino', :class => 'demo-option'}
  %label{:for => 'eth-non-hispanic-latino'} Non-Hispanic Latino
  %br
  %input{:type => 'checkbox', :id => 'eth-hispanic-latino', :class => 'demo-option'}
  %label{:for => 'eth-hispanic-latino'} Hispanic Latino
  %br
  %input{:type => 'checkbox', :id => 'eth-no-answer', :class => 'demo-option'}
  %label{:for => 'eth-no-answer'} Prefer not to answer

%div{:class => 'demographic-options'}
  %h4{:class => 'demo-header'} Gender
  %br
  %input{:type => 'checkbox', :id => 'gen-female', :class => 'demo-option'}
  %label{:for => 'gen-female'} Female
  %br
  %input{:type => 'checkbox', :id => 'gen-male', :class => 'demo-option'}
  %label{:for => 'gen-male'} Male
  %br
  %input{:type => 'checkbox', :id => 'gen-no-answer', :class => 'demo-option'}
  %label{:for => 'gen-no-answer'} Prefer not to answer

%div{:id => 'rounds-drop-down'}
  %select
    %option{:value => 'All reports'} All Reports
    %option{:value => 'Final report round 1'} Round 1
    %option{:value => 'Final report round 2'} Round 2
    %option{:value => 'Final report round 3'} Round 3
    %option{:value => 'Final report round 4'} Round 4

%h3{:class => 'query-result-header'}= "Number of Applicants: " + @applications.length().to_s()
%h3{:class => 'query-result-header'} Percentage of Applicants: ---
%h3{:class => 'query-result-header'}  Amount Rewarded: ---
    

%div{:id => 'query-table'}
  %table
    %tr
      %th Business Name
      %th City
      %th Zip Code
      %th County
      %th EIN
      %th NAICS
      %th Round Number
      %th Jobs Retained
      %th Amount Approved
      %th Number Of Employees
      %th Owner

    - @applications.each do |application|  
      %tr
        %td= get_company(application.ein).business_name
        %td= application.city
        %td= get_company(application.ein).zip
        %td= get_company(application.ein).county
        %td= application.ein
        %td= application.naics
        %td= application.round
        %td= application.jobs_retained
        %td= application.amount_approved
        %td= application.business_size
        %td= get_owner(application.ein).name


